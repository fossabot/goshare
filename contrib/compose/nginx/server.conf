# Docker registry proxy for api versions 1 and 2

upstream goshare {
  server goshare:8080;
}

# No client auth or TLS
server {
  listen 80;
  server_name localhost;

  # disable any limits to avoid HTTP 413 for large image uploads
  client_max_body_size 0;

  # required to avoid HTTP 411: see Issue #1486 (https://github.com/docker/docker/issues/1486)
  chunked_transfer_encoding on;

  location /api/ {
    include               goshare.conf;
  }

  location / {
    root   /usr/share/nginx/html;
    index  index.html index.htm;
  }
}

